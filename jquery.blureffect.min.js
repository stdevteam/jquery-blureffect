/*! jQuery Blur effect Plugin - v1.0 - 14/10/2013
* https://github.com/stdevteam/jquery-blureffect
* Copyright (c) 2013 STDev (http://st-dev.com); Licensed MIT */
(function(a){jQuery.fn.blureffect=function(c){c=a.extend(a.fn.blureffect.defaults,c);this.each(function(){var e=a(this);e.css({position:"absolute",top:c.top,left:c.left});var d=a("<canvas />").attr("id",e.attr("id")+"_canvas").css({position:"absolute",top:c.top,left:c.left});e.after(d);e.data("blurOptions",c);e.one("load",function(){var g=a(this).data("blurOptions"),f=a(this).attr("id"),h=f+"_canvas";jQuery.fn.blureffect.processor.blurImg(f,h,g.radius,g.regions,g.alpha)}).each(function(){if(this.complete){a(this).load()}})});return this};jQuery.fn.blureffect.defaults={radius:5,alpha:false,regions:[],top:"20px",left:"20px"};jQuery.fn.blureffect.processor={mul_table:[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table:[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],blurImg:function(f,e,q,g,j){if(g.length<=0){return}var m=document.getElementById(f),s=m.naturalWidth,p=m.naturalHeight,d=document.getElementById(e);d.style.width=s+"px";d.style.height=p+"px";d.width=s;d.height=p;var c=d.getContext("2d");c.clearRect(0,0,s,p);c.drawImage(m,0,0);if(isNaN(q)||q<1){return}var r;for(var l in g){r=g[l];var o=r.startX,k=r.startY,n=r.width,t=r.height;if(j){this.blurCanvasRGBA(e,o,k,n,t,q)}else{this.blurCanvasRGB(e,o,k,n,t,q)}}},blurCanvasRGBA:function(O,I,G,c,f,S){if(isNaN(S)||S<1){return}S|=0;var l=document.getElementById(O);var ac=l.getContext("2d");var X;try{X=ac.getImageData(I,G,c,f)}catch(ab){alert("Cannot access image");throw new Error("unable to access image data: "+ab)}var k=X.data;var Q,P,Z,W,u,z,q,h,j,F,V,t,H,D,d,L,R,v,s,o,w,A,B,K;var aa=S+S+1;var M=c<<2;var r=c-1;var U=f-1;var n=S+1;var T=n*(n+1)/2;var J=new b();var E=J;for(Z=1;Z<aa;Z++){E=E.next=new b();if(Z==n){var m=E}}E.next=J;var Y=null;var N=null;q=z=0;var C=mul_table[S];var g=shg_table[S];for(P=0;P<f;P++){L=R=v=s=h=j=F=V=0;t=n*(o=k[z]);H=n*(w=k[z+1]);D=n*(A=k[z+2]);d=n*(B=k[z+3]);h+=T*o;j+=T*w;F+=T*A;V+=T*B;E=J;for(Z=0;Z<n;Z++){E.r=o;E.g=w;E.b=A;E.a=B;E=E.next}for(Z=1;Z<n;Z++){W=z+((r<Z?r:Z)<<2);h+=(E.r=(o=k[W]))*(K=n-Z);j+=(E.g=(w=k[W+1]))*K;F+=(E.b=(A=k[W+2]))*K;V+=(E.a=(B=k[W+3]))*K;L+=o;R+=w;v+=A;s+=B;E=E.next}Y=J;N=m;for(Q=0;Q<c;Q++){k[z+3]=B=(V*C)>>g;if(B!=0){B=255/B;k[z]=((h*C)>>g)*B;k[z+1]=((j*C)>>g)*B;k[z+2]=((F*C)>>g)*B}else{k[z]=k[z+1]=k[z+2]=0}h-=t;j-=H;F-=D;V-=d;t-=Y.r;H-=Y.g;D-=Y.b;d-=Y.a;W=(q+((W=Q+S+1)<r?W:r))<<2;L+=(Y.r=k[W]);R+=(Y.g=k[W+1]);v+=(Y.b=k[W+2]);s+=(Y.a=k[W+3]);h+=L;j+=R;F+=v;V+=s;Y=Y.next;t+=(o=N.r);H+=(w=N.g);D+=(A=N.b);d+=(B=N.a);L-=o;R-=w;v-=A;s-=B;N=N.next;z+=4}q+=c}for(Q=0;Q<c;Q++){R=v=s=L=j=F=V=h=0;z=Q<<2;t=n*(o=k[z]);H=n*(w=k[z+1]);D=n*(A=k[z+2]);d=n*(B=k[z+3]);h+=T*o;j+=T*w;F+=T*A;V+=T*B;E=J;for(Z=0;Z<n;Z++){E.r=o;E.g=w;E.b=A;E.a=B;E=E.next}u=c;for(Z=1;Z<=S;Z++){z=(u+Q)<<2;h+=(E.r=(o=k[z]))*(K=n-Z);j+=(E.g=(w=k[z+1]))*K;F+=(E.b=(A=k[z+2]))*K;V+=(E.a=(B=k[z+3]))*K;L+=o;R+=w;v+=A;s+=B;E=E.next;if(Z<U){u+=c}}z=Q;Y=J;N=m;for(P=0;P<f;P++){W=z<<2;k[W+3]=B=(V*C)>>g;if(B>0){B=255/B;k[W]=((h*C)>>g)*B;k[W+1]=((j*C)>>g)*B;k[W+2]=((F*C)>>g)*B}else{k[W]=k[W+1]=k[W+2]=0}h-=t;j-=H;F-=D;V-=d;t-=Y.r;H-=Y.g;D-=Y.b;d-=Y.a;W=(Q+(((W=P+n)<U?W:U)*c))<<2;h+=(L+=(Y.r=k[W]));j+=(R+=(Y.g=k[W+1]));F+=(v+=(Y.b=k[W+2]));V+=(s+=(Y.a=k[W+3]));Y=Y.next;t+=(o=N.r);H+=(w=N.g);D+=(A=N.b);d+=(B=N.a);L-=o;R-=w;v-=A;s-=B;N=N.next;z+=c}}ac.putImageData(X,I,G)},blurCanvasRGB:function(L,F,D,c,d,P){if(isNaN(P)||P<1){return}P|=0;var k=document.getElementById(L),Y=k.getContext("2d"),T;try{T=Y.getImageData(F,D,c,d)}catch(X){alert("Cannot access image");throw new Error("unable to access image data: "+X)}var j=T.data;var N,M,V,S,s,v,o,g,h,C,q,E,A,I,O,t,n,u,w,H;var W=P+P+1;var J=c<<2;var r=c-1;var R=d-1;var m=P+1;var Q=m*(m+1)/2;var G=new b();var B=G;for(V=1;V<W;V++){B=B.next=new b();if(V==m){var l=B}}B.next=G;var U=null;var K=null;o=v=0;var z=this.mul_table[P];var f=this.shg_table[P];for(M=0;M<d;M++){I=O=t=g=h=C=0;q=m*(n=j[v]);E=m*(u=j[v+1]);A=m*(w=j[v+2]);g+=Q*n;h+=Q*u;C+=Q*w;B=G;for(V=0;V<m;V++){B.r=n;B.g=u;B.b=w;B=B.next}for(V=1;V<m;V++){S=v+((r<V?r:V)<<2);g+=(B.r=(n=j[S]))*(H=m-V);h+=(B.g=(u=j[S+1]))*H;C+=(B.b=(w=j[S+2]))*H;I+=n;O+=u;t+=w;B=B.next}U=G;K=l;for(N=0;N<c;N++){j[v]=(g*z)>>f;j[v+1]=(h*z)>>f;j[v+2]=(C*z)>>f;g-=q;h-=E;C-=A;q-=U.r;E-=U.g;A-=U.b;S=(o+((S=N+P+1)<r?S:r))<<2;I+=(U.r=j[S]);O+=(U.g=j[S+1]);t+=(U.b=j[S+2]);g+=I;h+=O;C+=t;U=U.next;q+=(n=K.r);E+=(u=K.g);A+=(w=K.b);I-=n;O-=u;t-=w;K=K.next;v+=4}o+=c}for(N=0;N<c;N++){O=t=I=h=C=g=0;v=N<<2;q=m*(n=j[v]);E=m*(u=j[v+1]);A=m*(w=j[v+2]);g+=Q*n;h+=Q*u;C+=Q*w;B=G;for(V=0;V<m;V++){B.r=n;B.g=u;B.b=w;B=B.next}s=c;for(V=1;V<=P;V++){v=(s+N)<<2;g+=(B.r=(n=j[v]))*(H=m-V);h+=(B.g=(u=j[v+1]))*H;C+=(B.b=(w=j[v+2]))*H;I+=n;O+=u;t+=w;B=B.next;if(V<R){s+=c}}v=N;U=G;K=l;for(M=0;M<d;M++){S=v<<2;j[S]=(g*z)>>f;j[S+1]=(h*z)>>f;j[S+2]=(C*z)>>f;g-=q;h-=E;C-=A;q-=U.r;E-=U.g;A-=U.b;S=(N+(((S=M+m)<R?S:R)*c))<<2;g+=(I+=(U.r=j[S]));h+=(O+=(U.g=j[S+1]));C+=(t+=(U.b=j[S+2]));U=U.next;q+=(n=K.r);E+=(u=K.g);A+=(w=K.b);I-=n;O-=u;t-=w;K=K.next;v+=c}}Y.putImageData(T,F,D)}};function b(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null}})(jQuery);